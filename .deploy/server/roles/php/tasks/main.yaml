---
- name: Install necessary packages for Ondrej PHP PPA
  ansible.builtin.apt:
    name:
      - software-properties-common
      - python3-launchpadlib
    state: present
    update_cache: yes

- name: Add Ondrej PHP PPA
  ansible.builtin.shell: "LC_ALL=C.UTF-8 add-apt-repository -y ppa:ondrej/php"
  args:
    creates: /etc/apt/sources.list.d/ondrej-php.list

- name: Update apt cache
  ansible.builtin.apt:
    update_cache: yes

- name: Install PHP 8.4 packages
  ansible.builtin.apt:
    name:
      - php8.4-cli
    state: present
    update_cache: yes
